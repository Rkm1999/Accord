<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h3>Connected Users</h3>
            <div id="userCount" class="user-count">Loading...</div>
            <ul id="userList"></ul>
            <button id="leaveBtn" class="leave-btn">Leave Chat</button>
        </div>
        <div class="chat-area">
            <div id="chatHistory" class="chat-history">
                <div class="system-message">Connecting to chat server...</div>
            </div>
            <div id="typingIndicator" class="typing-indicator"></div>
            <div id="replyBanner" class="reply-banner hidden">
                <span class="reply-text">Replying to <strong id="replyToUsername"></strong></span>
                <button type="button" class="cancel-reply" onclick="cancelReply()">âœ•</button>
            </div>
            <form id="chatForm" class="chat-form">
                <input type="hidden" id="replyTo" value="">
                <div class="chat-input-wrapper">
                    <label for="fileInput" class="file-input-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M16.88 9.1A4 4 0 0 0 13.41 6h-1.42a4 4 0 0 0-3.42 2H7a4 4 0 0 0 0 8h1.29l1.07 3.22A1 1 0 0 0 10.35 20h4.3a1 1 0 0 0 1-.35-.78L14.71 16h1.29a4 4 0 0 0 3.12-6.9zM7 8h1a2 2 0 0 1 2 2v1H7a2 2 0 0 1 0-4zm2 10H7l.63-1.9A4 4 0 0 0 10 16h-.29l-.63 2zm8-4H9v-1a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v1zm-1 4h-2l.63-2h1.42L16 18z"/>
                        </svg>
                    </label>
                    <input type="file" id="fileInput" accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.txt,.zip,.rar" multiple>
                    <div id="filePreview" class="file-preview hidden"></div>
                    <input type="text" id="message" placeholder="Type a message..." autocomplete="off">
                    <button type="submit">Send</button>
                </div>
            </form>
        </div>
    </div>
    <div id="imageModal" class="image-modal hidden" onclick="closeImageModal()">
        <span class="image-modal-close">&times;</span>
        <img id="imageModalImg" src="" alt="Full size">
    </div>
    <div id="editModal" class="edit-modal hidden" onclick="if(event.target.id === 'editModal') closeEditModal()">
        <div class="edit-modal-content" onclick="event.stopPropagation()">
            <h3>Edit Message</h3>
            <textarea id="editMessageInput" rows="4"></textarea>
            <div class="edit-modal-actions">
                <button type="button" class="cancel-edit" onclick="closeEditModal()">Cancel</button>
                <button type="button" class="save-edit" onclick="saveEdit()">Save</button>
            </div>
        </div>
    </div>
    <script src="chat.js"></script>
</body>
</html>
